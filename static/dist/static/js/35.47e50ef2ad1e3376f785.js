webpackJsonp([35],{WlLo:function(e,t){},lmfZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"login",data:()=>({loginUser:{userName:"",password:""},rules:{userName:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}]}}),methods:{submitForm(e){let t=this;this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e=t.$api+"home/dologin",s={userName:t.loginUser.userName,userPwd:t.loginUser.password};this.$axios.post(e,s).then(e=>{if(e.data&&0==e.data.code){let t=e.data.content.token;localStorage.setItem("eleToken",t),this.$store.dispatch("setIsAutnenticated",!this.isEmpty(t));let s={userName:e.data.content.user.userName,nickName:e.data.content.user.realName,phone:e.data.content.user.mobile,roleDesc:e.data.content.user.roleDesc,avatar:e.data.content.user.avatar,email:e.data.content.user.email};localStorage.setItem("bean",JSON.stringify(s)),this.$store.dispatch("setUser",s),this.$router.push("/index")}})}})},isEmpty:e=>void 0===e||null===e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("section",{staticClass:"form_container"},[e._m(0),e._v(" "),s("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginUser,rules:e.rules,"label-width":"60px"}},[s("el-form-item",{attrs:{label:"账号",prop:"userName"}},[s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.loginUser.userName,callback:function(t){e.$set(e.loginUser,"userName",t)},expression:"loginUser.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginUser.password,callback:function(t){e.$set(e.loginUser,"password",t)},expression:"loginUser.password"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("登 录")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"manage_tip"},[t("p",{staticClass:"title"},[this._v("TokenSky后台管理系统")])])}]};var o=s("C7Lr")(r,a,!1,function(e){s("WlLo")},"data-v-597e3e6a",null);t.default=o.exports}});