webpackJsonp([22],{J4Wv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("t/xR"),i={props:{title:Object,data:Array},data:()=>({}),computed:{permiss(){return this.$store.getters.permiss},addIf(){let t=this.permiss[`${this.$route.name}`];return console.log(t),t}},mounted(){console.log(this.title)},methods:{role_detail_ev(t){this.$emit("role_detail_ev",t)},role_eduit_ev(t){this.$emit("tb_eduit_ev",t)},role_delete_ev(t){let e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.$emit("tb_delete_ev",t)}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},setFlex:t=>7==t||8==t?"dflex2":"dflex1"}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table table1"},[a("div",{staticClass:"table_headv ddspflex_flexRow_jstCenter_aliCenter"},[t.title&&t.title.key1?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text1))]):t._e(),t._v(" "),t.title&&t.title.keyImg1?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.textImg1))]):t._e(),t._v(" "),t.title&&t.title.key3?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text3))]):t._e(),t._v(" "),t.title&&t.title.keyEduit1?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.textEduit1))]):t._e(),t._v(" "),t.title&&t.title.key4?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text4))]):t._e(),t._v(" "),t.title&&t.title.key5?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text5))]):t._e(),t._v(" "),t.title&&t.title.key6?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text6))]):t._e(),t._v(" "),t.title&&t.title.key7?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text7))]):t._e(),t._v(" "),t.title&&t.title.key8?a("div",{staticClass:"dflex1"},[t._v(t._s(t.title.text8))]):t._e(),t._v(" "),t.title&&t.title.keyDatetime1?a("div",{staticClass:"dflex2"},[t._v(t._s(t.title.textDatetime1))]):t._e(),t._v(" "),t.title&&t.title.keyDatetime2?a("div",{staticClass:"dflex2"},[t._v(t._s(t.title.textDatetime2))]):t._e(),t._v(" "),t.title&&t.title.key100?a("div",{staticClass:"dflex2"},[t._v(t._s(t.title.text100))]):t._e()]),t._v(" "),a("div",{staticClass:"table_body "},t._l(t.data,function(e,s){return a("div",{key:s,staticClass:"table_row"},[a("div",[a("div",{staticClass:" ddspflex_flexRow_jstCenter_aliCenter"},[t.title&&t.title.key1?a("div",{staticClass:"dflex1"},[t._v(t._s(s+1))]):t._e(),t._v(" "),t.title&&t.title.keyImg1?a("div",{staticClass:"dflex1"},[a("img",{staticClass:"sampleImg",attrs:{src:e[t.title.key2]}})]):t._e(),t._v(" "),t.title&&t.title.key3?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key3]))]):t._e(),t._v(" "),t.title&&t.title.keyEduit1?a("div",{staticClass:"dflex1",domProps:{innerHTML:t._s(e[t.title.keyEduit1])}}):t._e(),t._v(" "),t.title&&t.title.key4?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key4]))]):t._e(),t._v(" "),t.title&&t.title.key5?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key5]))]):t._e(),t._v(" "),t.title&&t.title.key6?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key6]))]):t._e(),t._v(" "),t.title&&t.title.key7?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key7]))]):t._e(),t._v(" "),t.title&&t.title.key8?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key8]))]):t._e(),t._v(" "),t.title&&t.title.key9?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key9]))]):t._e(),t._v(" "),t.title&&t.title.key10?a("div",{staticClass:"dflex1"},[t._v(t._s(e[t.title.key10]))]):t._e(),t._v(" "),t.title&&t.title.keyDatetime1?a("div",{staticClass:"dflex2"},[t._v(t._s(t._f("m_YYYYMMDD_HHmmss")(e[t.title.keyDatetime1])))]):t._e(),t._v(" "),t.title&&t.title.keyDatetime2?a("div",{staticClass:"dflex2"},[t._v(t._s(t._f("m_YYYYMMDD_HHmmss")(e[t.title.keyDatetime2])))]):t._e(),t._v(" "),t.title&&t.title.key100?a("div",{staticClass:"dflex2"},[t.addIf&&t.addIf.edit&&"edit"==t.addIf.edit?a("span",{staticClass:"tb_ope_btn eduit eduitBtn dcp",on:{click:function(e){return t.role_eduit_ev(s)}}},[t._v("编辑")]):t._e(),t._v(" "),t.addIf&&t.addIf.delete&&"delete"==t.addIf.delete?a("span",{staticClass:"tb_ope_btn  delete deleteBtn dcp",on:{click:function(e){return t.role_delete_ev(s)}}},[t._v("删除")]):t._e()]):t._e()])])])}),0)])},staticRenderFns:[]};var d=a("C7Lr")(i,l,!1,function(t){a("okng")},"data-v-dbd3ca74",null).exports,r=a("D2g7"),_={components:{position:s.a,comTb:d,searchV:r.a},data:()=>({dataCount:null,testShow:0,data:[],carID:null,title:{text1:"序号",key1:"index",key3:"title",text3:"标题",keyDatetime1:"updateTime",textDatetime1:"添加时间",key100:"ope",text100:"操作"},dialog:{show:!1,title:"",option:"edit"},RoleList:[],pageIndex:1,pageSize:10,userId:"",nickName:"",searchData:{},searchParam:{phone:"",startTime:"",endTime:""}}),mounted(){this.getList()},methods:{reset(){this.searchData.model1="",this.searchData.timeModel1="",this.searchData.timeModel2="",this.searchParam.phone="",this.searchParam.startTime="",this.searchParam.endTime="",this.getList()},searchUpdate(t){this.searchParam.phone=t.model1?t.model1:"",this.searchParam.startTime=t.timeModel1?t.timeModel1.getTime()/1e3:"",this.searchParam.endTime=t.timeModel2?t.timeModel2.getTime()/1e3:"",this.getList()},role_detail_ev(t){this.carID=this.data[t].carId,this.getDetail()},tb_eduit_ev(t){this.$router.push({name:"messageEduit",params:this.data[t]})},tb_delete_ev(t){let e=this,a=this.$api+"tokensky/message/delete",s={ids:e.data[t].messageId.toString()};e.$axios.post(a,s).then(t=>{t.data&&0==t.data.code&&(e.$message({message:t.data.msg,type:"success"}),e.getList())})},getList(){let t=this,e=`${t.$api}tokensky/message/datagrid?offset=${t.pageIndex}&limit=${t.pageSize}`;t.$axios.get(e).then(e=>{e.data&&0==e.data.code&&(t.data=e.data.content.rows,t.dataCount=e.data.content.total)})},getDetail(){let t=this,e=`${t.$url_head}car/car?pageIndex=${t.pageIndex}&pageSize=${t.pageSize}`;t.carID&&(e=`${e}&carId=${t.carID}`),t.$axios.get(e).then(e=>{e.data&&0==e.data.resultCode?(t.data=e.data.content.car,t.data.isDetail=1,t.$router.push({name:"carAdd",params:t.data})):this.$message({message:e.data.result,type:"error"})})},getSelist(){let t=this,e=this.$url_head+"car/carNorms";t.$axios.get(e).then(e=>{e.data&&0==e.data.resultCode?t.searchData.selectArr1=e.data.content.data:this.$message({message:e.data.result,type:"error"})});let a=this.$url_head+"car/carLoc";t.$axios.get(a).then(e=>{e.data&&0==e.data.resultCode?t.searchData.selectArr2=e.data.content.data:this.$message({message:e.data.result,type:"error"})});let s=this.$url_head+"car/carPrincipal";t.$axios.get(s).then(e=>{if(e.data&&0==e.data.resultCode){let a=e.data.content.data;a.forEach((t,e)=>{t.employeeId&&(t.dictionaryId=t.employeeId)}),t.searchData.selectArr3=a}else this.$message({message:e.data.result,type:"error"})})},handleAdd(){this.$router.push({path:"messageAdd"})},handleCurrentChange(t){this.pageIndex=t,this.getList()},handleSizeChange(t){this.pageIndex=1,this.pageSize=t,this.getList()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vc uservc"},[a("position",{attrs:{title:"OTC > 消息列表"}}),t._v(" "),a("div",{staticClass:"ctt"},[a("searchV",{attrs:{searchData:t.searchData,addBtnText:"添加消息"},on:{update:t.searchUpdate,reset:t.reset,handleAdd:t.handleAdd}}),t._v(" "),a("div",{staticClass:"userMngView dafter_ctt_dspBlock_clearBoth"},[t.data.length>0?a("comTb",{attrs:{data:t.data,title:t.title},on:{role_detail_ev:t.role_detail_ev,tb_eduit_ev:t.tb_eduit_ev,tb_delete_ev:t.tb_delete_ev}}):t._e(),t._v(" "),a("div",{staticClass:"pageV dfr"},[a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,50,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dataCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageIndex=e},"update:current-page":function(e){t.pageIndex=e}}})],1)],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(_,n,!1,function(t){a("NFgc")},"data-v-29fd7f06",null);e.default=c.exports},NFgc:function(t,e){},okng:function(t,e){}});