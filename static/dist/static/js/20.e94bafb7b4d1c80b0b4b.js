webpackJsonp([20],{"4jbh":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("t/xR"),i={props:{data:Array,titles:Array},data:()=>({}),computed:{permiss(){return this.$store.getters.permiss},addIf(){return this.permiss[`${this.$route.name}`]}},methods:{table_permission_ev(e){this.$emit("table_permission_ev",e)},role_permission_ev(e){this.$emit("role_permission_ev",e)},role_eduit_ev(e){this.$emit("role_eduit_ev",e)},role_delete_ev(e){let t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.$emit("role_delete_ev",e)}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},setFlex:e=>3==e?"dflex2":4==e?"dflex2":"dflex1"}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table1"},[s("div",{staticClass:"table_headv ddspflex_flexRow_jstCenter_aliCenter"},e._l(e.titles,function(t,a){return s("div",{key:a,class:e.setFlex(a)},[e._v(e._s(t.text))])}),0),e._v(" "),s("div",{staticClass:"table_body"},e._l(e.data,function(t,a){return s("div",{key:a,staticClass:"table_row"},[s("div",[s("div",{staticClass:" ddspflex_flexRow_jstCenter_aliCenter"},[s("div",{staticClass:"dflex1"},[e._v(e._s(a+1))]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"dflex1"},[e.addIf&&e.addIf.allocate&&"allocate"==e.addIf.allocate?s("span",{staticClass:"tb_ope_btn permissBtn1 dcp",on:{click:function(t){return e.role_permission_ev(a)}}},[e._v("授权")]):e._e(),e._v(" "),e.addIf&&e.addIf.edit&&"edit"==e.addIf.edit?s("span",{staticClass:"tb_ope_btn eduit eduitBtn dcp",on:{click:function(t){return e.role_eduit_ev(a)}}},[e._v("编辑")]):e._e(),e._v(" "),e.addIf&&e.addIf.delete&&"delete"==e.addIf.delete?s("span",{staticClass:"tb_ope_btn  delete deleteBtn dcp",on:{click:function(t){return e.role_delete_ev(a)}}},[e._v("删除")]):e._e()])])])])}),0)])},staticRenderFns:[]};var d=s("C7Lr")(i,o,!1,function(e){s("5BVR")},"data-v-b0aeb0bc",null).exports,r={props:{dialog:Object,form:Object},data:()=>({}),mounted(){},methods:{add(e,t){},onSubmit(){let e=this;if(!e.form.name)return void e.$message({showClose:!0,message:"名称不能为空"});const t=e.$api+"admin/role/edit";let s={name:e.form.name};"eduit"==e.dialog.option?(s.id=e.form.roleId,e.$axios.post(t,s).then(e=>{e.data&&0==e.data.code?(this.$message({message:e.data.msg,type:"success"}),this.dialog.show=!1,this.$emit("update")):this.$message({message:e.data.result,type:"error"})})):e.$axios.post(t,s).then(e=>{e.data&&0==e.data.code?(this.$message({message:e.data.msg,type:"success"}),this.dialog.show=!1,this.$emit("update")):this.$message({message:e.data.result,type:"error"})})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logFund"},[s("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.show,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[s("div",{staticClass:"form"},[s("el-form",{ref:"form",staticStyle:{margin:"10px",width:"auto"},attrs:{"label-width":"120px"}},[s("el-form-item",{attrs:{label:"名称:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{staticClass:"text_right"},[s("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提 交")])],1)],1)],1)])],1)},staticRenderFns:[]},n=s("C7Lr")(r,l,!1,null,null,null).exports,c={components:{position:a.a,roleTb:d,DialogRoleAdd:n},data:()=>({form:{roleName:"",description:""},data:[],titles:[{text:"序号"},{text:"角色名"},{text:"操作"}],dialog:{show:!1,title:"",option:"edit"},currentPage:1}),mounted(){this.getList()},computed:{permiss(){return this.$store.getters.permiss},addIf(){return this.permiss[`${this.$route.name}`]}},methods:{table_permission_ev(e){this.$router.push({name:"roleTabel",params:{data:this.data[e]}})},role_permission_ev(e){this.$router.push({name:"rolePermiss",params:{data:this.data[e]}})},role_eduit_ev(e){this.dialog={show:!0,title:"编辑角色",option:"eduit"},this.form={name:this.data[e].name,roleId:this.data[e].id}},role_delete_ev(e){let t=this,s=this.$api+"admin/role/delete",a={ids:""+t.data[e].id};t.$axios.post(s,a).then(e=>{e.data&&0==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.getList()):t.$message({message:e.data.msg,type:"error"})}).catch(e=>{})},getList(){let e=this,t=this.$api+"admin/role/datagrid";e.$axios.get(t).then(t=>{t.data&&0==t.data.code?e.data=t.data.content.rows:this.$message({message:t.data.result,type:"error"})}).catch(e=>{this.$message({message:e,type:"error"})})},onAdd(){this.dialog={show:!0,title:"新增角色",option:"add"},this.form={roleName:"",description:""}},handleCurrentChange(e){let t=this.paginations.page_size*(e-1),s=this.allTableData.filter((e,s)=>s>=t);this.tableData=s.filter((e,t)=>t<this.paginations.page_size)},handleSizeChange(e){this.paginations.page_index=1,this.paginations.page_size=e,this.tableData=this.allTableData.filter((t,s)=>s<e)}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vc uservc"},[s("position",{attrs:{title:"角色管理 > 角色列表"}}),e._v(" "),s("div",{staticClass:"ctt"},[e.addIf&&e.addIf.edit&&"edit"==e.addIf.edit?s("div",{staticClass:"title dafter_ctt_dspBlock_clearBoth"},[s("div",{staticClass:"dfr addBtn",staticStyle:{color:"rgb(0, 135, 204)"},on:{click:function(t){return e.onAdd()}}},[e._v("添加角色")])]):e._e(),e._v(" "),s("div",{staticClass:"userMngView dafter_ctt_dspBlock_clearBoth"},[s("roleTb",{attrs:{data:e.data,titles:e.titles},on:{role_eduit_ev:e.role_eduit_ev,table_permission_ev:e.table_permission_ev,role_delete_ev:e.role_delete_ev,role_permission_ev:e.role_permission_ev}})],1)]),e._v(" "),s("DialogRoleAdd",{attrs:{dialog:e.dialog,form:e.form},on:{update:e.getList}})],1)},staticRenderFns:[]};var _=s("C7Lr")(c,m,!1,function(e){s("M9mU")},"data-v-2cca1cb3",null);t.default=_.exports},"5BVR":function(e,t){},M9mU:function(e,t){}});