webpackJsonp([29],{"/+E0":function(t,e){},RzRF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("t/xR"),i={props:{data:Array,titles:Array},data:()=>({}),computed:{permiss(){return this.$store.getters.permiss},addIf(){return this.permiss[`${this.$route.name}`]}},methods:{role_detail_ev(t){this.$emit("role_detail_ev",t)},role_eduit_ev(t){this.$emit("tb_eduit_ev",t)},role_delete_ev(t){let e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.$emit("tb_delete_ev",t)}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},checkboxEv(t){this.$emit("checkboxEv",t)},setFlex:t=>4==t||5==t||8==t||10==t||13==t?"dflex2":"dflex1"}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table table1"},[a("div",{staticClass:"table_headv ddspflex_flexRow_jstCenter_aliCenter"},t._l(t.titles,function(e,s){return a("div",{key:s,class:t.setFlex(s)},[t._v(t._s(e.text))])}),0),t._v(" "),a("div",{staticClass:"table_body "},t._l(t.data,function(e,s){return a("div",{key:s,staticClass:"table_row"},[a("div",[a("div",{staticClass:" ddspflex_flexRow_jstCenter_aliCenter"},[a("div",{staticClass:"dflex1"},[t._v(t._s(s+1))]),t._v(" "),a("div",{staticClass:"dflex1"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.checkboxEv(s)}}})]),t._v(" "),a("div",{staticClass:"dflex1 dlh3"},[a("img",{staticClass:"sampleImg",attrs:{src:e.imgUrl}})]),t._v(" "),a("div",{staticClass:"dflex1"},[t._v(t._s(e.hashrateCategoryName))]),t._v(" "),a("div",{staticClass:"dflex2 dovFl_hd",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"dflex2"},[t._v(t._s(e.price))]),t._v(" "),a("div",{staticClass:"dflex1"},[t._v(t._s(e.electricBill))]),t._v(" "),a("div",{staticClass:"dflex1"},[t._v(t._s(e.sort))]),t._v(" "),a("div",{staticClass:"dflex2"},[t._v(t._s(e.runCycle))]),t._v(" "),a("div",{staticClass:"dflex1"},[t._v(t._s(e.inventory))]),t._v(" "),a("div",{staticClass:"dflex2"},[t._v(t._s(t._f("m_YYYYMMDD_HHmmss")(e.createTime)))]),t._v(" "),0==e.status?a("div",{staticClass:"dflex1"},[t._v("待上架")]):t._e(),t._v(" "),1==e.status?a("div",{staticClass:"dflex1 ",staticStyle:{color:"green"}},[t._v("上架中")]):t._e(),t._v(" "),2==e.status?a("div",{staticClass:"dflex1 ",staticStyle:{color:"red"}},[t._v("已下架")]):t._e(),t._v(" "),a("div",{staticClass:"dflex1"},[t._v(t._s(e.electricBill))]),t._v(" "),a("div",{staticClass:"dflex2"},[t.addIf&&t.addIf.edit&&"edit"==t.addIf.edit?a("span",{staticClass:"tb_ope_btn eduit eduitBtn dcp",on:{click:function(e){return t.role_eduit_ev(s)}}},[t._v("编辑")]):t._e(),t._v(" "),t.addIf&&t.addIf.delete&&"delete"==t.addIf.delete?a("span",{staticClass:"tb_ope_btn  delete deleteBtn dcp",on:{click:function(e){return t.role_delete_ev(s)}}},[t._v("删除")]):t._e()])])])])}),0)])},staticRenderFns:[]};var r=a("C7Lr")(i,d,!1,function(t){a("/+E0")},"data-v-13eb83f1",null).exports,l=a("D2g7"),c={components:{position:s.a,sl_slContract:r,searchV:l.a},data:()=>({dataCount:null,testShow:0,data:[],carID:null,titles:[{text:"序号"},{text:"多选"},{text:"缩略图"},{text:"分类"},{text:"标题名"},{text:"单份合约价格"},{text:"电费"},{text:"优先级"},{text:"运行周期（天）"},{text:"库存"},{text:"添加时间"},{text:"状态"},{text:"电费"},{text:"操作"}],dialog:{show:!1,title:"",option:"edit"},RoleList:[],pageIndex:1,pageSize:10,userId:"",nickName:"",searchData:{},searchParam:{},checkboxArr:[]}),computed:{permiss(){return this.$store.getters.permiss},addIf(){return this.permiss[`${this.$route.name}`]}},mounted(){this.getList()},methods:{checkboxEv(t){let e=this;e.checkboxArr[t]?e.checkboxArr[t]=!e.checkboxArr[t]:e.checkboxArr[t]=e.data[t].keyId,console.log(e.checkboxArr),console.log(e.checkboxArr.filter(Boolean))},btn11(){let t=this,e=`${t.$api}hashrate/transaction/shelves`,a={ids:t.checkboxArr.filter(Boolean).toString(),status:"1"};t.$axios.post(e,a).then(e=>{e.data&&0==e.data.code?(t.getList(),this.$message({message:e.data.msg,type:"success"})):this.$message({message:e.data.msg,type:"error"})})},btn12(){let t=this,e=`${t.$api}hashrate/transaction/shelves`,a={ids:t.checkboxArr.filter(Boolean).toString(),status:"2"};t.$axios.post(e,a).then(e=>{e.data&&0==e.data.code?(t.getList(),this.$message({message:e.data.msg,type:"success"})):this.$message({message:e.data.msg,type:"error"})})},btn13(){let t=this,e=`${t.$api}hashrate/transaction/delete`,a={ids:t.checkboxArr.filter(Boolean).toString(),status:"0"};t.$axios.post(e,a).then(e=>{e.data&&0==e.data.code?(t.getList(),this.$message({message:e.data.msg,type:"success"})):this.$message({message:e.data.msg,type:"error"})})},searchUpdate(t){console.log(t),this.searchParam.carNumber=t.model1?t.model1:"",this.searchParam.carNorms=t.selectId1?t.selectId1:"",this.searchParam.carLoc=t.selectId2?t.selectId2:"",this.searchParam.carPrincipal=t.selectId3?t.selectId3:"",this.getList()},role_detail_ev(t){this.carID=this.data[t].carId,this.getDetail()},tb_eduit_ev(t){this.$router.push({name:"slAdd",params:this.data[t]})},tb_delete_ev(t){let e=this,a=this.$api+"hashrate/transaction/delete",s={ids:e.data[t].keyId.toString()};e.$axios.post(a,s).then(t=>{t.data&&0==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getList()):e.$message({message:t.data.msg,type:"error"})}).catch(t=>{})},getList(){let t=this,e=`${t.$api}hashrate/transaction/datagrid?offset=${t.pageIndex}&limit=${t.pageSize}`;t.$axios.get(e).then(e=>{e.data&&0==e.data.code?(t.data=e.data.content.rows,t.dataCount=e.data.content.total,t.addIf&&t.addIf.shelves&&"shelves"==t.addIf.shelves&&(t.searchData.showBtn11=!0,t.searchData.showBtn12=!0,t.searchData.btn11="上架",t.searchData.btn12="下架")):this.$message({message:e.data.msg,type:"error"})})},getDetail(){let t=this,e=`${t.$url_head}car/car?pageIndex=${t.pageIndex}&pageSize=${t.pageSize}`;t.carID&&(e=`${e}&carId=${t.carID}`),t.$axios.get(e).then(e=>{e.data&&0==e.data.resultCode?(t.data=e.data.content.car,t.data.isDetail=1,t.$router.push({name:"carAdd",params:t.data})):this.$message({message:e.data.result,type:"error"})})},handleAdd(){this.$router.push({path:"slAdd"})},handleCurrentChange(t){this.pageIndex=t,this.getList()},handleSizeChange(t){this.pageIndex=1,this.pageSize=t,this.getList()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vc uservc"},[a("position",{attrs:{title:"算力合约管理 > 算力合约"}}),t._v(" "),a("div",{staticClass:"ctt"},[t.searchData&&t.searchData.showBtn11?a("searchV",{attrs:{searchData:t.searchData,addBtnText:"添加"},on:{update:t.searchUpdate,btn11:t.btn11,btn12:t.btn12,btn13:t.btn13,handleAdd:t.handleAdd}}):t._e(),t._v(" "),a("div",{staticClass:"userMngView dafter_ctt_dspBlock_clearBoth"},[a("sl_slContract",{attrs:{data:t.data,titles:t.titles},on:{checkboxEv:t.checkboxEv,role_detail_ev:t.role_detail_ev,tb_eduit_ev:t.tb_eduit_ev,tb_delete_ev:t.tb_delete_ev}}),t._v(" "),a("div",{staticClass:"pageV dfr"},[a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,50,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dataCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageIndex=e},"update:current-page":function(e){t.pageIndex=e}}})],1)],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(c,n,!1,function(t){a("jQqC")},"data-v-1e419268",null);e.default=o.exports},jQqC:function(t,e){}});