webpackJsonp([5],{"+hrx":function(e,t){},"7LdY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("t/xR"),l={props:{data:Array},data:()=>({defaultProps:{children:"child",label:"name"}}),methods:{handleNodeClick(e){this.$emit("handleNodeClick",e)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"view"},[t("el-tree",{attrs:{data:this.data,"node-key":"id","default-expanded-keys":[],"expand-on-click-node":!1,props:this.defaultProps},on:{"node-click":this.handleNodeClick}})],1)},staticRenderFns:[]};var s=a("C7Lr")(l,o,!1,function(e){a("sGbA")},"data-v-71e395ea",null).exports,d={props:{formdata:Object},components:{tree_access:s},data:()=>({rules:{imgUrlKey1:[{required:!0,message:"请上传",trigger:"change"}],selectId1:[{required:!0,message:"请选择",trigger:"change"}],selectId2:[{required:!0,message:"请选择",trigger:"change"}],selectId3:[{required:!0,message:"请选择",trigger:"change"}],selectId2:[{required:!0,message:"请选择",trigger:"change"}],selectId5:[{required:!0,message:"请选择",trigger:"change"}],model1:[{required:!0,message:"请输入",trigger:"blur"}],model2:[{required:!0,message:"请输入",trigger:"blur"}],model3:[{required:!0,message:"请输入",trigger:"blur"}],model4:[{required:!0,message:"请输入",trigger:"blur"}],model5:[{required:!0,message:"请输入",trigger:"blur"}],taModel1:[{required:!0,message:"请输入",trigger:"blur"}]}}),computed:{uploadUrl:function(){return this.$qiniu+"uploadFile"}},methods:{handleNodeClick(e){this.formdata.selectShow2=0,this.formdata.selectId2=e.id,this.formdata.btnText2=e.name,console.log(e)},nodeBtnEv(){this.$emit("nodeBtnEv",self.formdata)},mouseout_nodeBtn(){this.$emit("mouseout_nodeBtn",self.formdata)},checkurlfor(){this.$emit("checkurlfor",self.formdata)},cancelEv(){this.$emit("cancelEv_a",self.formdata)},submitForm(e){let t=this;this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;t.$emit("submit_a",t.formdata)})},handleAvatarSuccess(e,t){"0"==e.code?(this.formdata.imgUrl1=e.content.imgUrl,this.formdata.imgUrlKey1=e.content.imgKey,this.$message.success("上传成功")):this.$message.error(e.msg)},handleRemove(){this.formdata.imgUrl1=""},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;return t||this.$message.error("上传头像图片只能是 JPG PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 5MB!"),t&&a}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view formView"},[a("div",{},[a("el-form",{ref:"formdata",staticClass:"demo-ruleForm",attrs:{model:e.formdata,rules:e.rules,"label-width":"100px"}},[a("div",{staticClass:"dpadl"},[e.formdata.label1?a("el-form-item",{attrs:{label:e.formdata.label1,prop:"model1"}},[a("el-input",{model:{value:e.formdata.model1,callback:function(t){e.$set(e.formdata,"model1",t)},expression:"formdata.model1"}})],1):e._e(),e._v(" "),e.formdata.selectLabel1?a("el-form-item",{attrs:{label:e.formdata.selectLabel1,prop:"selectId1"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formdata.selectId1,callback:function(t){e.$set(e.formdata,"selectId1",t)},expression:"formdata.selectId1"}},e._l(e.formdata.selectArr1,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.dictionaryId}})}),1)],1):e._e(),e._v(" "),e.formdata.selectLabel2?a("el-form-item",{attrs:{label:e.formdata.selectLabel2,prop:"selectId2"}},[a("input",{staticClass:"parentNodeBtn",attrs:{type:"button",name:"",id:"",value:e.formdata.btnText2},on:{click:e.nodeBtnEv}})]):e._e(),e._v(" "),e.formdata.selectShow2?a("el-form-item",{attrs:{label:"　",prop:""}},[a("div",{staticClass:"treeWrap"},[a("div",{staticClass:"treeView"},[a("tree_access",{attrs:{data:e.formdata.selectArr2},on:{handleNodeClick:e.handleNodeClick}})],1)])]):e._e(),e._v(" "),e.formdata.label2?a("el-form-item",{attrs:{label:e.formdata.label2,prop:"model2"}},[a("el-input",{model:{value:e.formdata.model2,callback:function(t){e.$set(e.formdata,"model2",t)},expression:"formdata.model2"}})],1):e._e(),e._v(" "),e.formdata.label3?a("el-form-item",{attrs:{label:e.formdata.label3,prop:""}},[a("el-input",{attrs:{placeholder:e.formdata.placeholder3},model:{value:e.formdata.model3,callback:function(t){e.$set(e.formdata,"model3",t)},expression:"formdata.model3"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.checkurlfor},slot:"append"},[e._v("验证")])],1)],1):e._e(),e._v(" "),e.formdata.label4?a("el-form-item",{attrs:{label:e.formdata.label4,prop:""}},[a("el-input",{attrs:{disabled:"disabled",placeholder:e.formdata.placeholder4},model:{value:e.formdata.model4,callback:function(t){e.$set(e.formdata,"model4",t)},expression:"formdata.model4"}})],1):e._e(),e._v(" "),e.formdata.label5?a("el-form-item",{attrs:{label:e.formdata.label5,prop:"model5"}},[a("el-input",{attrs:{placeholder:"数字大的在前"},model:{value:e.formdata.model5,callback:function(t){e.$set(e.formdata,"model5",t)},expression:"formdata.model5"}})],1):e._e(),e._v(" "),e.formdata.label6?a("el-form-item",{attrs:{label:e.formdata.label6,prop:"model6"}},[a("el-input",{attrs:{placeholder:"不填或0代表不限量"},model:{value:e.formdata.model6,callback:function(t){e.$set(e.formdata,"model6",t)},expression:"formdata.model6"}})],1):e._e(),e._v(" "),e.formdata.taLabel1?a("el-form-item",{attrs:{label:e.formdata.taLabel1,prop:"taModel1"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.formdata.taModel1,callback:function(t){e.$set(e.formdata,"taModel1",t)},expression:"formdata.taModel1"}})],1):e._e(),e._v(" "),e.formdata.selectLabel3?a("el-form-item",{attrs:{label:e.formdata.selectLabel3,prop:"selectId3"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formdata.selectId3,callback:function(t){e.$set(e.formdata,"selectId3",t)},expression:"formdata.selectId3"}},e._l(e.formdata.selectArr3,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.dictionaryId}})}),1)],1):e._e(),e._v(" "),a("div",{staticClass:" dmb50",staticStyle:{"margin-left":"1.7rem"}},[a("el-button",{staticClass:"submitBtn",attrs:{type:"info"},on:{click:e.cancelEv}},[e._v("取消")]),e._v(" "),e.formdata.isDetail?a("el-button",{staticClass:"submitBtn",staticStyle:{"margin-left":"1.5rem"},attrs:{disabled:"",type:"primary"},on:{click:function(t){return e.submitForm("formdata")}}},[e._v("下一步")]):a("el-button",{staticClass:"submitBtn",staticStyle:{"margin-left":"1.5rem"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formdata")}}},[e._v("保存")])],1)],1)])],1)])},staticRenderFns:[]};var i=a("C7Lr")(d,m,!1,function(e){a("+hrx")},"data-v-22dff1f0",null).exports,c={components:{position:r.a,access_form:i},data:()=>({isEduit:0,isDetail:0,searchData:{title:"记录册列表"},formdata1:{label1:"名称:",model1:"",label2:"顺序:",model2:"",label3:"UrlFor:",model3:"",placeholder3:"如：BackendUserController.Edit,:id,1",label4:"UrlFor验证:",model4:"",placeholder4:"点击 验证 在这里显示UrlFor验证后的结果",selectLabel1:"类型:",selectArr1:[{name:"区域",dictionaryId:0},{name:"菜单",dictionaryId:1},{name:"按钮",dictionaryId:2}],selectId1:"",selectLabel2:"父节点:",selectArr2:[],selectId2:0,selectShow2:0,btnText2:"请选择"}}),mounted(){let e=this;e.getSelist(),e.$route.params&&Object.keys(e.$route.params).length>0?(e.isEduit=1,e.formdata1.selectId1=e.$route.params.rtype,e.formdata1.selectId2=e.$route.params.parentId,e.formdata1.btnText2=e.$route.params.btnText,e.formdata1.eduitId=e.$route.params.id,e.formdata1.model1=e.$route.params.name,e.formdata1.model2=e.$route.params.seq,e.formdata1.model3=e.$route.params.UrlFor,e.formdata1.model4=e.$route.params.linkUrl,e.formdata1.isDetail=e.$route.params.isDetail?e.$route.params.isDetail:""):e.isEduit=0},methods:{nodeBtnEv(){this.formdata1.selectShow2=!this.formdata1.selectShow2},mouseout_nodeBtn(){this.formdata1.selectShow2=0},handleNodeClick(e){this.formdata1.selectShow2=0,this.formdata1.selectId2=e.id,this.formdata1.btnText2=e.name,console.log(e)},checkurlfor(){let e=this;if(!e.formdata1.model3)return void e.$message.error("请输入urlFor");let t=this.$api+"admin/resource/checkurlfor",a={urlfor:e.formdata1.model3};e.$axios.post(t,a).then(t=>{t.data&&0==t.data.code?(e.formdata1.model4=t.data.content,e.$message.success(t.data.msg)):this.$message({message:t.data.msg,type:"error"})})},getSelist(){let e=this,t=this.$api+"admin/resource/treegrid";e.$axios.get(t).then(t=>{if(t.data&&0==t.data.code){e.formdata1.selectArr2=t.data.content;let a={id:0,name:"-顶级模块-"};e.formdata1.selectArr2.unshift(a)}else this.$message({message:t.data.msg,type:"error"})})},cancelEv_a(e){this.$router.push({path:"access"})},submit_a(e){let t=this,a=t.$api+"admin/resource/edit",r={};if(r.name=e.model1?e.model1:null,r.seq=e.model2?parseInt(e.model2):null,0!=parseInt(e.selectId1)){if(!e.model4)return void t.$message.error("非区域类型 需校验UrlFor");r.urlFor=e.model3?e.model3:null,r.linkUrl=e.model4?e.model4:null}r.rtype=parseInt(e.selectId1),r.rtype?r.parentId=e.selectId2:r.parentId=0,1==t.isEduit?(r.id=t.formdata1.eduitId,t.$axios.post(a,r).then(e=>{e.data&&0==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.$router.push({path:"access"})):this.$message({message:e.data.msg,type:"error"})})):t.$axios.post(a,r).then(e=>{e.data&&0==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.$router.push({path:"access"})):this.$message({message:e.data.msg,type:"error"})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vc uservc"},[a("position",{attrs:{title:"权限管理 > 权限编辑"}}),e._v(" "),a("div",{staticClass:"ctt"},[e.formdata1.selectArr2&&e.formdata1.selectArr2.length>0?a("access_form",{attrs:{formdata:e.formdata1},on:{checkurlfor:e.checkurlfor,nodeBtnEv:e.nodeBtnEv,mouseout_nodeBtn:e.mouseout_nodeBtn,handleNodeClick:e.handleNodeClick,cancelEv_a:e.cancelEv_a,submit_a:e.submit_a}}):e._e()],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(c,n,!1,function(e){a("Kr/h")},"data-v-1c2d3a76",null);t.default=f.exports},"Kr/h":function(e,t){},sGbA:function(e,t){}});