webpackJsonp([23],{GI7N:function(e,t){},QcPi:function(e,t){},Ql5M:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("t/xR"),i={props:{data:Array,titles:Array},data:()=>({}),computed:{permiss(){return this.$store.getters.permiss},addIf(){let e=this.permiss[`${this.$route.name}`];return console.log(e),e}},methods:{role_eduit_ev(e){this.$emit("tb_eduit_ev",e)},role_delete_ev(e){let t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.$emit("tb_delete_ev",e)}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},setFlex:e=>"dflex1"}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table1"},[s("div",{staticClass:"table_headv ddspflex_flexRow_jstCenter_aliCenter"},e._l(e.titles,function(t,a){return s("div",{key:a,class:e.setFlex(a)},[e._v(e._s(t.text))])}),0),e._v(" "),s("div",{staticClass:"table_body"},e._l(e.data,function(t,a){return s("div",{key:a,staticClass:"table_row"},[s("div",[s("div",{staticClass:" ddspflex_flexRow_jstCenter_aliCenter"},[s("div",{staticClass:"dflex1"},[e._v(e._s(a+1))]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.id))]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.userName))]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.realName))]),e._v(" "),t.rolesName&&t.rolesName.length>0?s("div",{staticClass:"dflex1 dlh25",staticStyle:{"line-height":".5rem"}},e._l(t.rolesName,function(t,a){return s("span",[e._v(e._s(t)+" "),s("br")])}),0):s("div",{staticClass:"dflex1 dlh25",staticStyle:{"line-height":".5rem"}},[e._v("----")]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.mobile))]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.email))]),e._v(" "),s("div",{staticClass:"dflex1"},[e._v(e._s(t.status))]),e._v(" "),s("div",{staticClass:"dflex1"},[e.addIf&&e.addIf.edit&&"edit"==e.addIf.edit?s("span",{staticClass:"tb_ope_btn eduit eduitBtn dcp",on:{click:function(t){return e.role_eduit_ev(a)}}},[e._v("编辑")]):e._e(),e._v(" "),e.addIf&&e.addIf.delete&&"delete"==e.addIf.delete?s("span",{staticClass:"tb_ope_btn  delete deleteBtn dcp",on:{click:function(t){return e.role_delete_ev(a)}}},[e._v("删除")]):e._e()])])])])}),0)])},staticRenderFns:[]};var o=s("C7Lr")(i,r,!1,function(e){s("QcPi")},"data-v-2992aa02",null).exports,l=s("D2g7"),d={props:{dialog:Object,form:Object,RoleList:Array},data:()=>({test:[]}),mounted(){},watch:{form:function(e){}},methods:{add(e,t){},onSubmit(){let e=this;if(!e.form.userName||!e.form.phone||!e.form.nickName)return void e.$message({showClose:!0,message:"用户、昵称、手机号不能为空"});if(e.form.password&&(e.form.password.length<6||e.form.password.length>30))return void e.$message({showClose:!0,message:"密码 长度在 6 到 30 个字符"});const t=e.$api+"admin/backenduser/edit";let s={userName:e.form.userName,userPwd:e.form.password,realName:e.form.nickName,mobile:e.form.phone,email:e.form.email,status:e.form.status,isSuper:e.form.isSuper};e.form.roleIds&&e.form.roleIds.length>0&&(s.ids=e.form.roleIds.toString()),"eduit"==e.dialog.option?(s.id=e.form.userId,e.$axios.post(t,s).then(e=>{e.data&&0==e.data.code?(this.$message({showClose:!0,message:"编辑成功",type:"success"}),this.dialog.show=!1,this.$emit("update")):this.$message({showClose:!0,message:e.data.msg,type:"error"})})):e.$axios.post(t,s).then(e=>{e.data&&0==e.data.code?(this.$message({showClose:!0,message:e.data.msg,type:"success"}),this.dialog.show=!1,this.$emit("update")):this.$message({showClose:!0,message:e.data.msg,type:"error"})})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logFund"},[s("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.show,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[s("div",{staticClass:"form"},[s("el-form",{ref:"form",staticStyle:{margin:"10px",width:"auto"},attrs:{"label-width":"120px"}},[s("el-form-item",{attrs:{label:"用户:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),"eduit"==e.dialog.option?s("el-form-item",{attrs:{label:"重置密码:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),s("p",{staticStyle:{color:"red"}},[e._v("长度在 6 到 30 个字符")])],1):s("el-form-item",{attrs:{label:"密码:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),s("p",{staticStyle:{color:"red"}},[e._v("长度在 6 到 30 个字符")])],1),e._v(" "),s("el-form-item",{attrs:{label:"昵称:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱:"}},[s("el-input",{attrs:{type:"permissionName"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色:"}},[s("el-checkbox-group",{model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.RoleList)+"\n\t\t\t\t\t\t"),e._l(e.RoleList,function(t,a){return s("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),s("el-form-item",{attrs:{label:"超级管理员:"}},[s("el-radio-group",{model:{value:e.form.isSuper,callback:function(t){e.$set(e.form,"isSuper",t)},expression:"form.isSuper"}},[s("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),s("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"状态:"}},[s("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[s("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1),e._v(" "),s("el-form-item",{staticClass:"text_right"},[s("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提 交")])],1)],1)],1)])],1)},staticRenderFns:[]},m=s("C7Lr")(d,n,!1,null,null,null).exports,c={components:{position:a.a,userTb:o,DialogUserAdd:m,searchV:l.a},data:()=>({dataCount:null,testShow:0,data:[],titles:[{text:"序号"},{text:"用户ID"},{text:"用户名"},{text:"昵称"},{text:"角色"},{text:"手机号"},{text:"邮箱"},{text:"状态"},{text:"操作"}],dialog:{show:!1,title:"",option:"edit"},form:{userName:"",password:"",nickName:"",phone:"",roleId:"",description:""},RoleList:[],pageIndex:1,pageSize:10,userId:"",nickName:"",formInline:{label1:"手机号",model1:"",label2:"用户ID",model2:"",label3:"昵称",model3:"",reset:1},searchParam:{mobile:"",userId:"",realName:""}}),mounted(){this.getList(),this.getRoleList()},methods:{reset(){this.searchParam.mobile="",this.searchParam.userId="",this.searchParam.realName="",this.formInline.model1="",this.formInline.model2="",this.formInline.model3="",this.getList()},searchUpdate(e){this.searchParam.mobile=e.model1?e.model1:"",this.searchParam.userId=e.model2?e.model2:"",this.searchParam.realName=e.model3?e.model3:"",this.getList()},tb_eduit_ev(e){this.dialog={show:!0,title:"编辑用户",option:"eduit"},this.form={userId:this.data[e].id,userName:this.data[e].userName,password:"",phone:this.data[e].mobile,nickName:this.data[e].realName,email:this.data[e].email,roleIds:this.data[e].roleIds,status:this.data[e].status,isSuper:this.data[e].isSuper}},tb_delete_ev(e){let t=this,s=this.$api+"admin/backenduser/delete",a={ids:""+t.data[e].id};t.$axios.post(s,a).then(e=>{e.data&&0==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.getList()):t.$message({message:e.data.msg,type:"error"})})},getRoleList(){let e=this,t=this.$api+"admin/role/datagrid";e.$axios.get(t).then(t=>{t.data&&0==t.data.code?e.RoleList=t.data.content.rows:this.$message({message:t.data.msg,type:"error"})}).catch(e=>{this.$message({message:e,type:"error"})})},getList(){let e=this,t=`${e.$api}admin/backenduser/datagrid?offset=${e.pageIndex}&limit=${e.pageSize}`;t=`${t}&mobile=${e.searchParam.mobile}&id=${e.searchParam.userId}&realName=${e.searchParam.realName}`,e.$axios.get(t).then(t=>{if(t.data&&0==t.data.code){let s=t.data.content.rows;for(let e=0;e<s.length>0;e++)null==s[e].roleIds&&(s[e].roleIds=[]);e.data=s,e.dataCount=t.data.content.total}else this.$message({message:t.data.result,type:"error"})})},handleAdd(){this.dialog={show:!0,title:"新增用户",option:"add",data:[]},this.form={userName:"",password:"",phone:"",roleId:"",roleIds:[],roles:"",roleDesc:"",status:1,isSuper:0}},handleCurrentChange(e){this.pageIndex=e,this.getList()},handleSizeChange(e){this.pageIndex=1,this.pageSize=e,this.getList()}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vc uservc"},[s("position",{attrs:{title:"用户管理 > 用户列表"}}),e._v(" "),s("div",{staticClass:"ctt"},[s("searchV",{attrs:{searchData:e.formInline,addBtnText:"添加用户"},on:{update:e.searchUpdate,reset:e.reset,handleAdd:e.handleAdd}}),e._v(" "),s("div",{staticClass:"userMngView dafter_ctt_dspBlock_clearBoth"},[s("userTb",{attrs:{data:e.data,titles:e.titles},on:{tb_eduit_ev:e.tb_eduit_ev,tb_delete_ev:e.tb_delete_ev}}),e._v(" "),s("div",{staticClass:"pageV dfr"},[s("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,50,100,200,300,400],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)],1)],1),e._v(" "),s("DialogUserAdd",{attrs:{dialog:e.dialog,form:e.form,RoleList:e.RoleList},on:{update:e.getList}})],1)},staticRenderFns:[]};var p=s("C7Lr")(c,u,!1,function(e){s("GI7N")},"data-v-80f37df8",null);t.default=p.exports}});